"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(){var e,S=!1;function D(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];S&&console.log(r)}function j(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}var r="object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"===("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global||this;null!=r&&(e=r.throttledQueue);var t=function(e){var o=e.min_rpi,n=e.interval,r=e.max_rpi,i=void 0===r?o:r,t=e.evenly_spaced,u=void 0===t||t,a=e.errors_per_second,f=void 0===a?5:a,l=e.back_off,s=void 0!==l&&l,m=e.retry,c=void 0===m?0:m;if(S="undefined"!==j(e.debug)&&!0===e.debug,"number"!==j(o))throw new Error("min_rpi must be a number");if(!Number.isInteger(o))throw new Error("min_rpi is not an integer");if(o<1)throw new Error("min_rpi should be greater than 0");if("number"!==j(i))throw new Error("max_rpi must be a number");if(!Number.isInteger(i))throw new Error("max_rpi is not an integer");if(i<o)throw new Error("max_rpi is less than min_rpi");if("number"!==j(n))throw new Error("interval must be a number");if("number"!==j(f))throw new Error("errors_per_second must be a number");if("boolean"!==j(u))throw new Error("evenly_spaced must be a boolean");if("boolean"!==j(s))throw new Error("back_off must be a boolean");if("number"!==j(c))throw new Error("retry must be a number");var b=n,d=Math.ceil(i-(i-o)/2),p=d,h=0,w=!1,y=!1;u&&(b/=d,d=1),b<200&&console.warn("An interval of less than 200ms can create performance issues.");var v=[],_=Date.now(),g=function e(){var r=_+b,t=Date.now();if(t<r)return clearTimeout(T),void(T=setTimeout(e,r-t));for(var o=v.splice(0,d),n=0;n<o.length;n++){var i=o[n];!1===("function"===j(i)?i():i.fn())&&(h++,0<c&&("function"===j(i)?v.push({retry:c,fn:i}):"object"===j(i)&&0!=--i.retry&&v.push(i)))}if(w=!1,_=Date.now(),0===v.length)return y=!1,clearTimeout(T),void clearTimeout(x);T=setTimeout(e,b)},E=function e(){if(D("Error Count:",h),f<=h){if(D("Decreasing rate limit"),p=Math.max(o,p-1),u?b=n/p:d=p,s&&!w){var r=_+b,t=Date.now();t<r&&(clearTimeout(T),w=!0,T=setTimeout(g,r-t+n))}}else!w&&0===h&&0<v.length&&(D("Increasing rate limit"),p=Math.min(i,p+1),u?b=n/p:d=p);h=0,D("current_rpi: ".concat(p)),x=setTimeout(e,n)},T=setTimeout(g,b),x=setTimeout(E,n);return y=!0,function(e){v.push(e),y||(y=!0,T=setTimeout(g,b),x=setTimeout(E,n))}};t.noConflict=function(){return r.throttledQueue=e,t},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define([],function(){return t}):r.throttledQueue=t}).call(void 0);