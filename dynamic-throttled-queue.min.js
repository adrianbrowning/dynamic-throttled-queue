"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(){var e,E=!1;function x(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];E&&console.log(r)}function S(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}var r="object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"===("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global||this;null!=r&&(e=r.throttledQueue);var o=function(e){var t=e.min_rpi,n=e.interval,r=e.max_rpi,i=void 0===r?t:r,o=e.evenly_spaced,u=void 0===o||o,a=e.errors_per_second,f=void 0===a?5:a,l=e.back_off,s=void 0!==l&&l;if(E="undefined"!==S(e.debug)&&!0===e.debug,"number"!==S(t))throw new Error("min_rpi must be a number");if(!Number.isInteger(t))throw new Error("min_rpi is not an integer");if(t<1)throw new Error("min_rpi should be greater than 0");if("number"!==S(i))throw new Error("max_rpi must be a number");if(!Number.isInteger(i))throw new Error("max_rpi is not an integer");if(i<t)throw new Error("max_rpi is less than min_rpi");if("number"!==S(n))throw new Error("interval must be a number");if("number"!==S(f))throw new Error("errors_per_second must be a number");if("boolean"!==S(u))throw new Error("evenly_spaced must be a boolean");if("boolean"!==S(s))throw new Error("back_off must be a boolean");var m=n,c=Math.ceil(i-(i-t)/2),b=c,d=0,p=!1,h=!1;u&&(m/=c,c=1),m<200&&console.warn("An interval of less than 200ms can create performance issues.");var w=[],y=Date.now(),_=function e(){var r=y+m,o=Date.now();if(o<r)return clearTimeout(g),void(g=setTimeout(e,r-o));for(var t=w.splice(0,c),n=0;n<t.length;n++){!1===t[n]()&&d++}if(p=!1,y=Date.now(),0===w.length)return h=!1,clearTimeout(g),void clearTimeout(T);g=setTimeout(e,m)},v=function e(){if(x("Error Count:",d),f<=d){if(x("Decreasing rate limit"),b=Math.max(t,b-1),u?m=n/b:c=b,s&&!p){var r=y+m,o=Date.now();o<r&&(clearTimeout(g),p=!0,g=setTimeout(_,r-o+n))}}else!p&&0===d&&0<w.length&&(x("Increasing rate limit"),b=Math.min(i,b+1),u?m=n/b:c=b);d=0,x("current_rpi: ".concat(b)),T=setTimeout(e,n)},g=setTimeout(_,m),T=setTimeout(v,n);return h=!0,function(e){w.push(e),h||(h=!0,g=setTimeout(_,m),T=setTimeout(v,n))}};o.noConflict=function(){return r.throttledQueue=e,o},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=o:"function"==typeof define&&define.amd?define([],function(){return o}):r.throttledQueue=o}).call(void 0);